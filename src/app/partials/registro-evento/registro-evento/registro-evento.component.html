<app-navbar></app-navbar>
<div class="registro-evento-bg">
  <div class="registro-evento-center">
    <mat-card class="registro-evento-card">
      <div class="registro-evento-header">
        <button mat-icon-button color="primary" routerLink="/" aria-label="Regresar" style="align-self: flex-start; margin-left: 8px;">
          <mat-icon>arrow_back</mat-icon>
        </button>
        <span class="registro-evento-title">Registro de Evento Académico</span>
      </div>
      <form [formGroup]="eventoForm" (ngSubmit)="onSubmit()" class="evento-form">
        <mat-form-field appearance="fill">
          <mat-label>Nombre del evento</mat-label>
          <input matInput formControlName="nombre_evento" required>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Tipo de evento</mat-label>
          <mat-select formControlName="tipo_evento" required>
            <mat-option value="Conferencia">Conferencia</mat-option>
            <mat-option value="Taller">Taller</mat-option>
            <mat-option value="Seminario">Seminario</mat-option>
            <mat-option value="Concurso">Concurso</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Fecha de realización</mat-label>
          <input matInput [matDatepicker]="picker" formControlName="fecha_realizacion" required>
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>

        <div class="horario-fields">
          <mat-form-field appearance="fill" fxFlex>
            <mat-label>Hora de inicio</mat-label>
            <input matInput type="time" formControlName="hora_inicio" required>
          </mat-form-field>
          <mat-form-field appearance="fill" fxFlex>
            <mat-label>Hora de finalización</mat-label>
            <input matInput type="time" formControlName="hora_final" required>
          </mat-form-field>
        </div>

        <mat-form-field appearance="fill">
          <mat-label>Lugar</mat-label>
          <input matInput formControlName="lugar" required>
        </mat-form-field>

        <div class="publico-label">Público objetivo</div>
        <div formArrayName="publico_objetivo" class="publico-checkboxes">
          <mat-checkbox *ngFor="let publico of publicos; let i = index" [formControlName]="i">
            {{publico.label}}
          </mat-checkbox>
        </div>

        <mat-form-field appearance="fill">
          <mat-label>Responsable del evento</mat-label>
          <mat-select formControlName="responsable" required>
            <mat-option *ngFor="let r of responsables" [value]="{tipo: r.tipo, id: r.id}">
              {{r.user?.first_name || r.first_name}} {{r.user?.last_name || r.last_name}} ({{r.tipo}})
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Descripción</mat-label>
          <textarea matInput formControlName="descripcion_breve"></textarea>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Cupo máximo de asistentes</mat-label>
          <input matInput type="number" formControlName="cupo_maximo" min="1" required>
        </mat-form-field>

        <div class="section-buttons">
          <button mat-raised-button color="primary" type="submit" class="btn-primary">Registrar</button>
          <button mat-raised-button color="warn" type="button" (click)="eventoForm.reset()" class="btn-cancelar">Cancelar</button>
        </div>
      </form>
    </mat-card>
  </div>
</div>